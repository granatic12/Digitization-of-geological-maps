# Digitization-of-geological-maps

**Описание проекта**  

Данный репозиторий содержит прототип системы автоматической оцифровки ретроспективных геологических карт глубин залегания.
Решение предназначено для преобразования растровых изображений архивных карт в машиночитаемый формат (X, Y, Z), пригодный для последующей интеграции с ГИС- и CAD-системами.

Проект выполнен в рамках индустриального сотрудничества с ПАО «Газпром нефть».

**Цель работы**: Разработка алгоритма автоматизированного извлечения глубин залегания геологических поверхностей из отсканированных бумажных карт и формирование структурированного набора данных.

### Основная идея решения

Вместо классического подхода, основанного на анализе изолиний, используется комбинированный метод, включающий:
- кластеризацию цветовых геологических зон;  
- многоэтапное OCR-распознавание числовых подписей глубин;  
- сопоставление глубин с геозонами по цвету.  

Это позволяет снизить объём ручной работы и повысить устойчивость алгоритма на картах сложного качества.

### Структура алгоритма

Предобработка изображения:  
* удаление линейных артефактов (медианный фильтр);
* сглаживание текстур с сохранением границ (билатеральный фильтр);
* нормализация контраста (CLAHE).

Кластеризация карты:  
* перевод изображения в цветовое пространство;
* кластеризация пикселей методом K-Means (реализация OpenCV);
* формирование конечного набора геологических зон.

Распознавание глубин:  
* генерация нескольких версий изображения с разными параметрами контраста и масштаба;
* применение EasyOCR и Tesseract;
* дополнительное вращение патчей с числами для устойчивости к ориентации;
* фильтрация нереалистичных значений;
* удаление дубликатов по пространственной близости.

Формирование словаря:  
* сопоставление цвета геозоны и глубины;
* возможность ручной валидации словаря пользователем.

Экспорт данных:
* для каждого пикселя геозоны определяется глубина;
* формируется TXT-файл с координатами в формате x, y, z.

Верификация:
* восстановление карты из выходного файла;
* сравнение с исходным изображением.

**Используемые технологии**

Python — основной язык разработки;
OpenCV — предобработка изображений, фильтрация, цветовая кластеризация (K-Means);
EasyOCR — нейросетевое распознавание текста;
Tesseract OCR — OCR на основе LSTM-моделей;
NumPy — обработка массивов данных.
